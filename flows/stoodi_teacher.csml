import {Dispatcher} from reducers

start:

  do global_user_position = {"step": "start", "flow": "stoodi_teacher"}

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Legal! üçé \nPara te apresentar as pessoas especialistas do nosso time, preciso que voc√™ me conte..."  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )
  
  say Wait(200)

  goto step step_0

step_0:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Qual mat√©ria voc√™ mais gosta de aprender?"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto step step_1

step_1:
  
  hold

	do var_event = Dispatcher("USER_RESPONSE", 
      {
      "course": "stoodi", 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
      }, event
  )
  if (var_event.step && var_event.flow){
      do step_name = var_event.step
      do flow_name = var_event.flow
      goto $step_name@$flow_name
  }

  if (event.intent.name match "Subject.Math"){
    do stoodi.userFavoriteSubject = "Matem√°tica"
    do stoodi.subjectTeacher = "Prof. Paulo"
    goto favoriteSubject

  } else if (event.intent.name match "Subject.Bio"){
    do stoodi.userFavoriteSubject = "Biologia"
    do stoodi.subjectTeacher = "Prof. Rafael"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Chem"){
    do stoodi.userFavoriteSubject = "Qu√≠mica"
    do stoodi.subjectTeacher = "Prof. Kleber"  
    goto favoriteSubject
  } else if (event.intent.name match "Subject.English"){
    do stoodi.userFavoriteSubject = "Ingl√™s"
    do stoodi.subjectTeacher = "Prof. Tamires"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Geo"){
    do stoodi.userFavoriteSubject = "Geografia"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Gram"){
    do stoodi.userFavoriteSubject = "Gram√°tica"
    do stoodi.subjectTeacher = "Prof.¬™ Priscilla"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.History"){
    do stoodi.userFavoriteSubject = "Hist√≥ria"
    do stoodi.subjectTeacher = "Prof. Dimas"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Philosophy"){
    do stoodi.userFavoriteSubject = "Filosofia"
    do stoodi.subjectTeacher = "Prof. Ethel"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Physics"){
    do stoodi.userFavoriteSubject = "F√≠sica"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Socio"){
    do stoodi.userFavoriteSubject = "Sociologia"
    do stoodi.subjectTeacher = "Prof. Braian"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Spanish"){
    do stoodi.userFavoriteSubject = "Espanhol"
    do stoodi.subjectTeacher = "Prof.¬™ Andr√©ia"
    goto favoriteSubject
  } else {
    goto step step_2
  }  

step_2:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Poxa, n√£o encontrei essa mat√©ria nos meus arquivos... üò¨"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  say Wait(200)

  goto step step_3

step_3:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Me diz sua segunda mat√©ria favorita?"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto secondSubject


secondSubject:

  do global_user_position = {"step": "secondSubject", "flow": "stoodi_teacher"}

  hold

	do var_event = Dispatcher("USER_RESPONSE", 
      {
      "course": "stoodi", 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
      }, event
  )

  if (var_event.step && var_event.flow){
      do step_name = var_event.step
      do flow_name = var_event.flow
      goto $step_name@$flow_name
  }

  if (event.intent.name match "Subject.Math"){
    do stoodi.userFavoriteSubject = "Matem√°tica"
    do stoodi.subjectTeacher = "Prof. Paulo"
    goto favoriteSubject

  } else if (event.intent.name match "Subject.Bio"){
    do stoodi.userFavoriteSubject = "Biologia"
    do stoodi.subjectTeacher = "Prof. Rafael"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Chem"){
    do stoodi.userFavoriteSubject = "Qu√≠mica"
    do stoodi.subjectTeacher = "Prof. Kleber"  
    goto favoriteSubject
  } else if (event.intent.name match "Subject.English"){
    do stoodi.userFavoriteSubject = "Ingl√™s"
    do stoodi.subjectTeacher = "Prof. Tamires"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Geo"){
    do stoodi.userFavoriteSubject = "Geografia"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Gram"){
    do stoodi.userFavoriteSubject = "Gram√°tica"
    do stoodi.subjectTeacher = "Prof.¬™ Priscilla"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.History"){
    do stoodi.userFavoriteSubject = "Hist√≥ria"
    do stoodi.subjectTeacher = "Prof. Dimas"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Philosophy"){
    do stoodi.userFavoriteSubject = "Filosofia"
    do stoodi.subjectTeacher = "Prof. Ethel"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Physics"){
    do stoodi.userFavoriteSubject = "F√≠sica"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Socio"){
    do stoodi.userFavoriteSubject = "Sociologia"
    do stoodi.subjectTeacher = "Prof. Braian"
    goto favoriteSubject
  } else if (event.intent.name match "Subject.Spanish"){
    do stoodi.userFavoriteSubject = "Espanhol"
    do stoodi.subjectTeacher = "Prof.¬™ Andr√©ia"
    goto favoriteSubject
  } else {
    goto step step_4
  }  
step_4:

  say Dispatcher("SHOW_QUESTION", 
      {
          "question": {
            "prompt":  "Eu realmente n√£o encontrei nada sobre isso...."  
        }, 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
      }, NULL
    )

  say Wait(200)

  goto step step_5

step_5:

  do stoodi.randomFavoriteSubject = OneOf(["Matem√°tica","F√≠sica","Qu√≠mica","Biologia","Filosofia","Sociologia","Geografia","Hist√≥ria","Gram√°tica","Ingl√™s","Espanhol"])
  do stoodi.userFavoriteSubject = stoodi.randomFavoriteSubject

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Ent√£o olha s√≥ a refer√™ncia em {{stoodi.randomFavoriteSubject}}. Tenho certeza que voc√™ vai adorar!"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  goto subjectAudio

favoriteSubject:

  do global_user_position = {"step": "favoriteSubject", "flow": "stoodi_teacher"}

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Eu tamb√©m adoro {{userFavoriteSubject.to_lowercase()}}! \nOuve o que {{stoodi.subjectTeacher}}, nossa refer√™ncia no assunto, preparou sobre o tema! "  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )
  
  say Wait(200)
  
  goto subjectAudio

subjectAudio:

  do global_user_position = {"step": "subjectAudio", "flow": "stoodi_teacher"}
	
	say Dispatcher("SHOW_AUDIO", 
		{
			"url": "https://res.cloudinary.com/doje19w7m/video/upload/v1566570505/jzyibueohdmjb6zjhd1y.mp4",
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

	say Wait(1500)

  goto step step_6

step_6:

	say Dispatcher("SHOW_QUESTION", 
			{
					"question": {
						"prompt":  "Aposto que te deixou com vontade de estudar agora mesmo... üî•"  
				}, 
				"metadata": _metadata,
				"course_id": course_id,
				"airtable_key": global_airtable_key
			}, NULL
		)

	say Wait(200)

  goto step step_7

step_7:

	say Dispatcher("SHOW_QUESTION", 
			{
					"question": {
						"prompt":  "Por isso separei uma aula incr√≠vel de {{stoodi.userFavoriteSubject.to_lowercase()}} aqui para voc√™." 
				}, 
				"metadata": _metadata,
				"course_id": course_id,
				"airtable_key": global_airtable_key
			}, NULL
		)

	say Wait(200)

  goto step step_8

step_8:

	say Dispatcher("SHOW_VIDEO", 
			{
				"url": "https://www.youtube.com/watch?v=9voPV6fRYL0",
				"metadata": _metadata,
				"course_id": course_id,
				"airtable_key": global_airtable_key
			}, NULL
		)

  say Wait(5000)

  goto step step_9

step_9:

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt": "Podemos continuar a conversa ou voc√™ pode me chamar depois de ver a aula.  \nEstarei por aqui pra gente falar da mat√©ria que voc√™ menos curte üôà"
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

	goto leastfavoriteSubject


leastfavoriteSubject:

  do global_user_position = {"step": "leastfavoriteSubject", "flow": "stoodi_teacher"}

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "Fala a√≠, foi um aul√£o n√£o √© mesmo? üíØüíØüíØ"  
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

	say Wait(200)

  goto step step_10

step_10:

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "Agora vamos falar dos *menos* favoritos, afinal quero te ajudar com tudo o que precisamos estudar."  
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

  goto step step_11

step_11:

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "Me conta, qual mat√©ria voc√™ n√£o curte tanto estudar?"  
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

  goto step step_12

step_12:

	hold
  
  do global_user_position = {"step": "leastfavoriteSubjectGet", "flow": "stoodi_teacher"}

	do var_event = Dispatcher("USER_RESPONSE", 
        {
        "course": "stoodi", 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
        }, event
    )
    if (var_event.step && var_event.flow){
        do step_name = var_event.step
        do flow_name = var_event.flow
        goto $step_name@$flow_name
    }

  if (event.intent.name match "Subject.Math"){
    do stoodi.userleastFavorite = "Matem√°tica"
    do stoodi.subjectTeacher = "Prof. Paulo"
    goto leastFavorite

  } else if (event.intent.name match "Subject.Bio"){
    do stoodi.userleastFavorite = "Biologia"
    do stoodi.subjectTeacher = "Prof. Rafael"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Chem"){
    do stoodi.userleastFavorite = "Qu√≠mica"
    do stoodi.subjectTeacher = "Prof. Kleber"  
    goto leastFavorite
  } else if (event.intent.name match "Subject.English"){
    do stoodi.userleastFavorite = "Ingl√™s"
    do stoodi.subjectTeacher = "Prof. Tamires"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Geo"){
    do stoodi.userleastFavorite = "Geografia"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Gram"){
    do stoodi.userleastFavorite = "Gram√°tica"
    do stoodi.subjectTeacher = "Prof.¬™ Priscilla"
    goto leastFavorite
  } else if (event.intent.name match "Subject.History"){
    do stoodi.userleastFavorite = "Hist√≥ria"
    do stoodi.subjectTeacher = "Prof. Dimas"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Philosophy"){
    do stoodi.userleastFavorite = "Filosofia"
    do stoodi.subjectTeacher = "Prof. Ethel"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Physics"){
    do stoodi.userleastFavorite = "F√≠sica"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Socio"){
    do stoodi.userleastFavorite = "Sociologia"
    do stoodi.subjectTeacher = "Prof. Braian"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Spanish"){
    do stoodi.userleastFavorite = "Espanhol"
    do stoodi.subjectTeacher = "Prof.¬™ Andr√©ia"
    goto leastFavorite
  } else {
    goto step step_17
  }

step_17:

		say Dispatcher("SHOW_QUESTION", 
				{
						"question": {
							"prompt":  "Poxa, n√£o encontrei essa mat√©ria nos meus arquivos... üò¨"  
					}, 
					"metadata": _metadata,
					"course_id": course_id,
					"airtable_key": global_airtable_key
				}, NULL
			)

  goto step step_18

step_18:

		say Dispatcher("SHOW_QUESTION", 
				{
						"question": {
							"prompt":  "Me diz sua outra mat√©ria que n√£o goste tanto?"  
					}, 
					"metadata": _metadata,
					"course_id": course_id,
					"airtable_key": global_airtable_key
				}, NULL
			)

		goto leastfavoriteSubject2


leastFavorite:

  do global_user_position = {"step": "leastFavorite", "flow": "stoodi_teacher"}

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "{{stoodi.userleastFavorite}} √© complicado mesmo, mas temos especialistas por aqui que podem te ajudar! Olha s√≥:"  
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

	goto leastfavoritevideo

leastfavoriteSubject2:

  do global_user_position = {"step": "leastfavoriteSubject2", "flow": "stoodi_teacher"}

  hold

	do var_event = Dispatcher("USER_RESPONSE", 
        {
        "course": "stoodi", 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
        }, event
    )
    if (var_event.step && var_event.flow){
        do step_name = var_event.step
        do flow_name = var_event.flow
        goto $step_name@$flow_name
    }

  if (event.intent.name match "Subject.Math"){
    do stoodi.userleastFavorite = "Matem√°tica"
    do stoodi.subjectTeacher = "Prof. Paulo"
    goto leastFavorite

  } else if (event.intent.name match "Subject.Bio"){
    do stoodi.userleastFavorite = "Biologia"
    do stoodi.subjectTeacher = "Prof. Rafael"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Chem"){
    do stoodi.userleastFavorite = "Qu√≠mica"
    do stoodi.subjectTeacher = "Prof. Kleber"  
    goto leastFavorite
  } else if (event.intent.name match "Subject.English"){
    do stoodi.userleastFavorite = "Ingl√™s"
    do stoodi.subjectTeacher = "Prof. Tamires"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Geo"){
    do stoodi.userleastFavorite = "Geografia"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Gram"){
    do stoodi.userleastFavorite = "Gram√°tica"
    do stoodi.subjectTeacher = "Prof.¬™ Priscilla"
    goto leastFavorite
  } else if (event.intent.name match "Subject.History"){
    do stoodi.userleastFavorite = "Hist√≥ria"
    do stoodi.subjectTeacher = "Prof. Dimas"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Philosophy"){
    do stoodi.userleastFavorite = "Filosofia"
    do stoodi.subjectTeacher = "Prof. Ethel"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Physics"){
    do stoodi.userleastFavorite = "F√≠sica"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Socio"){
    do stoodi.userleastFavorite = "Sociologia"
    do stoodi.subjectTeacher = "Prof. Braian"
    goto leastFavorite
  } else if (event.intent.name match "Subject.Spanish"){
    do stoodi.userleastFavorite = "Espanhol"
    do stoodi.subjectTeacher = "Prof.¬™ Andr√©ia"
    goto leastFavorite
  } else {
    goto step step_19
  }     

step_19:

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Eu realmente n√£o encontrei nada sobre isso...."  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  goto step step_20

step_20:
    
  do stoodi.randomLeastFavoriteSubject = OneOf(["Matem√°tica","F√≠sica","Qu√≠mica","Biologia","Filosofia","Sociologia","Geografia","Hist√≥ria","Gram√°tica","Ingl√™s","Espanhol"])
  do stoodi.userLeastFavorite = stoodi.randomLeastFavoriteSubject

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Mas olha s√≥ esse material com especialistas em {{stoodi.randomLeastFavoriteSubject.to_lowercase()}}:"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
    )
    
  goto leastfavoritevideo


leastfavoritevideo:

  do global_user_position = {"step": "leastfavoritevideo", "flow": "stoodi_teacher"}

  say Wait(3000)
  
	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "{{stoodi.userleastFavorite}}" 
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

  goto step step_21

step_21:

	say Dispatcher("SHOW_VIDEO", 
		{
			"url": "https://www.youtube.com/watch?v=9voPV6fRYL0",
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)

  say Wait(3000)
  
  goto step step_22

step_22:

	say Dispatcher("SHOW_QUESTION", 
		{
				"question": {
					"prompt":  "√â pra aprender a gostar! üòÅ"  
			}, 
			"metadata": _metadata,
			"course_id": course_id,
			"airtable_key": global_airtable_key
		}, NULL
	)
  
	say Wait(200)

  goto step step_23

step_23:

	say Dispatcher("SHOW_QUESTION", 
			{
					"question": {
						"prompt":  "Pra continuar no ritmo separei uma aula incr√≠vel de {{stoodi.userleastFavorite.to_lowercase()}} aqui para voc√™."  
				}, 
				"metadata": _metadata,
				"course_id": course_id,
				"airtable_key": global_airtable_key
			}, NULL
		)
    
    say Wait(2000)

  goto step step_24

step_24:

  do classesObj = {"F√≠sica": "https://www.stoodi.com.br/materias/fisica/cinematica-vetorial/", "Qu√≠mica": "https://www.stoodi.com.br/materias/quimica/calculos-estequiometricos/", "Biologia": "https://www.stoodi.com.br/materias/biologia/tecido-conjuntivo/", "Filosofia": "https://www.stoodi.com.br/materias/filosofia/etica-e-politica-na-filosofia-contemporanea/", "Ingl√™s": "https://www.stoodi.com.br/materias/ingles/phrasal-verbs/", "Geografia": "https://www.stoodi.com.br/materias/geografia/tigres-asiaticos/", "Hist√≥ria": "https://www.stoodi.com.br/materias/historia/era-napoleonica/", "Sociologia": "https://www.stoodi.com.br/materias/sociologia/michel-foucault/", "Espanhol": "https://www.stoodi.com.br/materias/espanhol/introduccion-a-los-adjetivos/", "Gram√°tica": "https://www.stoodi.com.br/materias/gramatica/regras-de-acentuacao/" , "Matem√°tica": "https://www.stoodi.com.br/materias/matematica/operacoes-com-numeros-naturais/"}
  
  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "{{classesObj[stoodi.userleastFavorite]}}"
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  say Wait(200)

  goto step step_25

step_25:
    
  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Ufa! Uma aula pra n√£o esquecer! üí°"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )
  
  say Wait(200)
  
  goto step step_26

step_26:
    
  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Me conta em uma mensagem, o que achou at√© agora dos nossos estudos?"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto step step_27

step_27:

    hold

		do var_event = Dispatcher("USER_RESPONSE", 
        {
        "course": "stoodi", 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
        }, event
    )
    if (var_event.step && var_event.flow){
        do step_name = var_event.step
        do flow_name = var_event.flow
        goto $step_name@$flow_name
    }

    do stoodi.userTeacherFlowFeedback = event
    //lembrar se o usu√°rio j√° passou pelo cta antes
    goto cta_teacher


cta_teacher:

  do global_user_position = {"step": "cta_teacher", "flow": "stoodi_teacher"}

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Al√©m de aulas intensas como esta, no Stoodi voc√™ tamb√©m tem: \n‚úîÔ∏è Corre√ß√£o de reda√ß√£o \n‚úîÔ∏è Aulas ao vivo \n‚úîÔ∏è Mais de 6 mil v√≠deo aulas \n‚úî Mais de 30 mil exerc√≠cios \nE muuuuito mais. "  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  say Wait(200)

  goto step step_28

step_28:

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "https://www.stoodi.com.br \nClica aqui para ver como vamos te ajudar a entrar na universidade! üéìüéìüéì"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  say Wait(2000)

  goto cta_subjects

cta_subjects:

  do global_user_position = {"step": "cta_subjects", "flow": "stoodi_teacher"}

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Vamos continuar explorando outras mat√©rias e aulas para o Enem?"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

step_29:    
    
    hold

    if (event.intent.name match "Utilities.Reject"){
      goto step step_30
    }
    else {
      goto step step_31
    }

step_30:

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Tudo bem!"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  goto flow stoodi_menu

step_31:

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Voc√™ est√° realmente se dedicando muito aos estudos pro Enem! üöÄ"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  goto subjectMenu


subjectMenu:

  do global_user_position = {"step": "subjectMenu", "flow": "stoodi_teacher"}

  say Dispatcher("SHOW_QUESTION", 
        {
            "question": {
              "prompt":  "Qual dessa mat√©rias voc√™ quer conhecer agora? \n\n‚û°Ô∏è Matem√°tica \n‚û°Ô∏è F√≠sica \n‚û°Ô∏è Qu√≠mica \n‚û°Ô∏è Biologia \n‚û°Ô∏è Filosofia \n‚û°Ô∏è Sociologia \n‚û°Ô∏è Geografia \n‚û°Ô∏è Hist√≥ria \n‚û°Ô∏è Ô∏èGram√°tica \n‚û°Ô∏è Ingl√™s \n‚û°Ô∏è Espanhol \nüîô Menu"  
          }, 
          "metadata": _metadata,
          "course_id": course_id,
          "airtable_key": global_airtable_key
        }, NULL
      )

  goto getSubject

getSubject:

  do global_user_position = {"step": "getSubject", "flow": "stoodi_teacher"}
  
  hold

	do var_event = Dispatcher("USER_RESPONSE", 
      {
      "course": "stoodi", 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
      }, event
  )
  if (var_event.step && var_event.flow){
      do step_name = var_event.step
      do flow_name = var_event.flow
      goto $step_name@$flow_name
  }

  if (event.intent.name match "Subject.Math"){
    do stoodi.nextSubject = "Matem√°tica"
    do stoodi.subjectTeacher = "Prof. Paulo"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Bio"){
    do stoodi.nextSubject = "Biologia"
    do stoodi.subjectTeacher = "Prof. Rafael"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Chem"){
    do stoodi.nextSubject = "Qu√≠mica"
    do stoodi.subjectTeacher = "Prof. Kleber"  
    goto choosenSubject
  } else if (event.intent.name match "Subject.English"){
    do stoodi.nextSubject = "Ingl√™s"
    do stoodi.subjectTeacher = "Prof. Tamires"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Geo"){
    do stoodi.nextSubject = "Geografia"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Gram"){
    do stoodi.nextSubject = "Gram√°tica"
    do stoodi.subjectTeacher = "Prof.¬™ Priscilla"
    goto choosenSubject
  } else if (event.intent.name match "Subject.History"){
    do stoodi.nextSubject = "Hist√≥ria"
    do stoodi.subjectTeacher = "Prof. Dimas"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Philosophy"){
    do stoodi.nextSubject = "Filosofia"
    do stoodi.subjectTeacher = "Prof. Ethel"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Physics"){
    do stoodi.nextSubject = "F√≠sica"
    do stoodi.subjectTeacher = "Prof. Doug"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Socio"){
    do stoodi.nextSubject = "Sociologia"
    do stoodi.subjectTeacher = "Prof. Braian"
    goto choosenSubject
  } else if (event.intent.name match "Subject.Spanish"){
    do stoodi.nextSubject = "Espanhol"
    do stoodi.subjectTeacher = "Prof.¬™ Andr√©ia"
    goto choosenSubject
  } else if (event.intent.name match "Utilities.Menu"){
    goto flow stoodi_menu
  } else {
    goto step step_32
  }

step_32:

  say Dispatcher("SHOW_QUESTION", 
      {
          "question": {
            "prompt":  "Poxa, n√£o encontrei essa mat√©ria nos meus arquivos... üò¨"  
        }, 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
      }, NULL
    )

  goto step step_33

step_33:

  say Dispatcher("SHOW_QUESTION", 
      {
          "question": {
            "prompt":  "Me diz uma das mat√©rias desta lista pra eu pode te mostrar uma aula sensacional! "  
        }, 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
      }, NULL
    )

  goto subjectMenu


choosenSubject:

  do global_user_position = {"step": "choosenSubject", "flow": "stoodi_teacher"}
  
  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Voc√™ vai adorar nosso conte√∫do de {{stoodi.nextSubject.to_lowercase()}}!"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto subjectVideo

subjectVideo:

  do global_user_position = {"step": "subjectVideo", "flow": "stoodi_teacher"}

	say Dispatcher("SHOW_AUDIO", 
				{
					"url": "https://res.cloudinary.com/doje19w7m/video/upload/v1566570505/jzyibueohdmjb6zjhd1y.mp4",
					"metadata": _metadata,
					"course_id": course_id,
					"airtable_key": global_airtable_key
				}, NULL
			)

	say Wait(200)

  goto step step_34

step_34:

	say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Nosso time est√° super preparado pra te dar todo o suporte  e te acompanhar at√© a Universidade! üòÅ"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

	say Wait(200)

  goto step step_35

step_35:

	say Dispatcher("SHOW_QUESTION", 
				{
						"question": {
							"prompt":  "Olha s√≥ essa aula de {{stoodi.nextSubject.to_lowercase()}}, na medida dos seus estudos..."  
					}, 
					"metadata": _metadata,
					"course_id": course_id,
					"airtable_key": global_airtable_key
				}, NULL
			)

  goto step step_36

step_36:

	say Dispatcher("SHOW_VIDEO", 
				{
					"url": "https://www.youtube.com/watch?v=9voPV6fRYL0", 
					"metadata": _metadata,
					"course_id": course_id,
					"airtable_key": global_airtable_key
				}, NULL
			)

	goto cta_subjects

import {Dispatcher} from reducers

start:

  do global_user_position = {"step": "start", "flow": "stoodi_praticarcombanco"}
  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "“No pain, no gain” não é mesmo? 😅 \nApesar do nosso cérebro não ser um músculo, é importante que a gente pratique nossos exercícios como se fosse! 🧠🏋️🏋️🏋️"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  say Wait(2000)

  goto step step_1

step_1:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Aqui na Stoodi, temos mais de 6.000 exercícios à sua espera, para exercitar todos os dias até a sua entrada na Universidade 😄😄😄"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  say Wait(200)

  goto step step_2

step_2:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Para uma melhor experiência de aprendizagem, me conta, seu celular é: \n\n*a.* Android 🤖 \n*b.* iOs 🍏"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto osget

osget:

  do global_user_position = {"step": "osget", "flow": "stoodi_praticarcombanco"}

  hold

  do var_event = Dispatcher("USER_RESPONSE", 
      {
      "course": "stoodi", 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
      }, event
  )
  if (var_event.step && var_event.flow){
      do step_name = var_event.step
      do flow_name = var_event.flow
      goto $step_name@$flow_name
  }

    if (event.text.contains("one") || event.text.contains("Droid") || event.text.contains("um") || event.text.contains("Android") || event.text.contains("android") || event.text.contains("1") || event.text.contains("a") || event.text.contains("A") || event.text.contains("🤖") || event.text.contains("droid")) {
      goto step step_3
    } else if (event.text.contains("two") || event.text.contains("Aple") || event.text.contains("dois") || event.text.contains("Apple") || event.text.contains("apple") || event.text.contains("2") || event.text.contains("b") || event.text.contains("B") || event.text.contains("🍏") || event.text.contains("aple")) {
      goto step step_4
    } else {
      goto step step_5
    }

step_3:
  do stoodi.exercisesLink = "https://play.google.com/store/apps/details?id=com.stoodi.stoodiapp"
  
  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Você pode acessar todos os nossos exercícios no app do Stoodi! 🤓"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )
  goto exercisesmessage

step_4:
  do stoodi.exercisesLink = "https://www.stoodi.com.br/exercicios/"

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Você pode acessar todos os nossos exercícios na plataforma do Stoodi! 🤓"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )
  goto exercisesmessage

step_5:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Ops, não entendi 😅 \nEscreva por favor se você usa *Android* ou *Apple*"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto osget2

exercisesmessage:

  do global_user_position = {"step": "exercisesmessage", "flow": "stoodi_praticarcombanco"}

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "{{stoodi.exercisesLink}}"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )
  
  say Wait(3000)

  goto step step_6

step_6:

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "13 matérias pra você explorar, garanto que terão muitos desafios! 🏆🏆🏆"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto flow stoodi_menu

osget2:

  do global_user_position = {"step": "osget2", "flow": "stoodi_praticarcombanco"}

    hold

    do var_event = Dispatcher("USER_RESPONSE", 
        {
        "course": "stoodi", 
        "metadata": _metadata,
        "course_id": course_id,
        "airtable_key": global_airtable_key
        }, event
    )
    if (var_event.step && var_event.flow){
        do step_name = var_event.step
        do flow_name = var_event.flow
        goto $step_name@$flow_name
    }

    if (event.text.contains("one") || event.text.contains("Droid") || event.text.contains("um") || event.text.contains("Android") || event.text.contains("android") || event.text.contains("1") || event.text.contains("a") || event.text.contains("A") || event.text.contains("🤖") || event.text.contains("droid")) {
      goto step step_7
    } else if (event.text.contains("two") || event.text.contains("Aple") || event.text.contains("dois") || event.text.contains("Apple") || event.text.contains("apple") || event.text.contains("2") || event.text.contains("b") || event.text.contains("B") || event.text.contains("🍏") || event.text.contains("aple")) {
      goto step step_8
    } else {
      goto step step_9
    }

step_7:

  do stoodi.exercisesLink = "https://play.google.com/store/apps/details?id=com.stoodi.stoodiapp"
  
  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Você pode acessar todos os nossos exercícios no app do Stoodi! 🤓"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )
  goto exercisesmessage

step_8:

  do stoodi.exercisesLink = "https://www.stoodi.com.br/exercicios/"

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Você pode acessar todos os nossos exercícios na plataforma do Stoodi! 🤓"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto exercisesmessage

step_9:

  do stoodi.exercisesLink = "https://www.stoodi.com.br/exercicios/"

  say Dispatcher("SHOW_QUESTION", 
    {
        "question": {
          "prompt":  "Você pode acessar todos os nossos exercícios na plataforma do Stoodi! 🤓"  
      }, 
      "metadata": _metadata,
      "course_id": course_id,
      "airtable_key": global_airtable_key
    }, NULL
  )

  goto exercisesmessage

